<form
  [formGroup]="loginForm"
  (ngSubmit)="onSubmit()"
  novalidate
  class="w-full"
>

  <!-- ── Campo: Email ─────────────────────────────────────────── -->
  <div class="mb-4">
    <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
      Correo Electrónico
    </label>
    <input
      id="email"
      type="email"
      formControlName="email"
      placeholder="usuario@ejemplo.com"
      autocomplete="email"
      [class.border-red-500]="emailCtrl.invalid && emailCtrl.touched"
      [class.focus:ring-red-400]="emailCtrl.invalid && emailCtrl.touched"
      class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none
             focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white
             dark:border-gray-600 transition"
    />
    <!-- Mensaje de error inline -->
    <p *ngIf="emailError" class="mt-1 text-sm text-red-500 flex items-center gap-1">
      <i class="fa-solid fa-circle-exclamation text-xs"></i>
      {{ emailError }}
    </p>
  </div>

  <!-- ── Campo: Contraseña ─────────────────────────────────────── -->
  <div class="mb-4">
    <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">
      Contraseña
    </label>
    <div class="relative">
      <input
        id="password"
        [type]="showPassword ? 'text' : 'password'"
        formControlName="password"
        placeholder="••••••••"
        autocomplete="current-password"
        [class.border-red-500]="passwordCtrl.invalid && passwordCtrl.touched"
        class="w-full px-4 py-2 pr-10 border border-gray-300 rounded-xl focus:outline-none
               focus:ring-2 focus:ring-primary-500 dark:bg-gray-800 dark:text-white
               dark:border-gray-600 transition"
      />
      <!-- Botón mostrar/ocultar contraseña -->
      <button
        type="button"
        (click)="togglePassword()"
        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary-500 transition"
        [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
      >
        <i [class]="showPassword ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye'"></i>
      </button>
    </div>
    <!-- Mensaje de error inline -->
    <p *ngIf="passwordError" class="mt-1 text-sm text-red-500 flex items-center gap-1">
      <i class="fa-solid fa-circle-exclamation text-xs"></i>
      {{ passwordError }}
    </p>
  </div>

  <!-- ── Error global del backend ──────────────────────────────── -->
  <div
    *ngIf="errorMessage"
    role="alert"
    class="mb-4 flex items-start gap-2 rounded-xl bg-red-50 dark:bg-red-900/30
           border border-red-200 dark:border-red-700 px-4 py-3 text-sm text-red-700
           dark:text-red-300"
  >
    <i class="fa-solid fa-triangle-exclamation mt-0.5 shrink-0"></i>
    <span>
      {{ errorMessage }}
      <a
        *ngIf="errorMessage.includes('contraseña') || errorMessage.includes('incorrectos')"
        routerLink="/recuperar-contrasena"
        class="ml-1 underline font-medium hover:text-red-900 dark:hover:text-red-100"
      >¿Olvidaste tu contraseña?</a>
    </span>
  </div>

  <!-- ── Botón de envío ─────────────────────────────────────────── -->
  <button
    type="submit"
    [disabled]="isLoading"
    class="mt-2 w-full flex items-center justify-center gap-2 py-2.5 px-4 rounded-xl
           bg-primary-600 hover:bg-primary-700 active:bg-primary-800
           text-white font-semibold transition
           disabled:opacity-60 disabled:cursor-not-allowed"
  >
    <!-- Spinner mientras carga -->
    <i *ngIf="isLoading" class="fa-solid fa-circle-notch fa-spin"></i>
    <span>{{ isLoading ? 'Iniciando sesión...' : 'Ingresar' }}</span>
  </button>

</form>